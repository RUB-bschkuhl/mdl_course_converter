{{!
    This file is part of Moodle - http://moodle.org/

    Moodle is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Moodle is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
}}
{{!
    @template block_course_audit/section

    Displays the admin tree as a list of grouped links.

    Example context (json):
    {
 //TODO
    }
}}
    <div class="section-page" data-section-number="{{number}}">
    <div class="card mb-3">
        <div class="card-body p-3">
        <div class="section-guide mb-4 p-3 bg-light rounded">
            <header class="section-header mb-3">
                <h3 class="section-title h5 mb-0">
                     <i class="fa fa-info-circle" 
                       data-toggle="tooltip" 
                       data-placement="left"
                       data-html="true"
                       title="{{#str}} sectionpage_help, block_course_audit {{/str}}"
                       aria-label="{{#str}} sectionpage_help, block_course_audit {{/str}}">
                    </i>
                    <span class="text-primary">{{#str}} section, block_course_audit {{/str}} {{number}}:</span>
                    <span class="text-dark">{{title}}</span>
                     
                </h3>
            </header>
        </div>
            {{#modules}}
            {{#hasrestrictions}}
            <div class="activity-item d-flex align-items-center mb-2 py-1 px-2 rounded" data-activity-type="{{type}}" data-index="{{index}}" data-restrictions="{{#restrictionids}}{{.}} {{/restrictionids}}">
            {{/hasrestrictions}}
            {{^hasrestrictions}}
            <div class="activity-item d-flex align-items-center mb-2 py-1 px-2 rounded " data-activity-type="{{type}}" data-index="{{index}}">
            {{/hasrestrictions}}
                <span class="badge badge-primary badge-sm mr-2 text-uppercase">
                    {{type}}
                </span>
                {{#url}}
                <a href="{{url}}" 
                   class="activity-link text-reset text-decoration-none flex-grow-1"
                   title="{{name}}">
                    <span class="activity-name text-dark">{{name}}</span>
                </a>
                {{/url}}
                {{^url}}
                <span class="activity-name text-dark flex-grow-1">{{name}}</span>
                {{/url}}

            {{#hasrestrictions}}
                    <button type="button" 
                        class="btn btn-link p-0 text-muted restriction-toggler" 
                        data-toggle="collapse" 
                        data-target="#restrictions-{{index}}"
                        aria-expanded="false">
                    {{#pix}} t/dropdown, core {{/pix}}
                </button>
            {{/hasrestrictions}}
            </div>
            {{#hasrestrictions}}
            <div class="restrictions-container ml-2">
                <div id="restrictions-{{index}}" class="collapse restriction-details">
                    <div class="alert alert-warning mt-2 p-2 small">
                        {{#str}} restriction, block_course_audit {{/str}}:
                        {{#restrictions}}
                            <ul class="mb-0 pl-3">
                                {{#text}}
                                <li>{{{text}}}</li>
                                {{/text}}
                            </ul>
                        {{/restrictions}}
                    </div>
                </div>
            </div>
            {{/hasrestrictions}}
            {{#violations}}
            <div class="alert alert-warning">
                <h5>{{#str}} flow_violation, block_course_audit {{/str}}</h5>
                <p>{{description}}</p>
                
                {{#suggested_fix}}
                <button class="btn btn-sm btn-primary apply-fix" 
                        data-module-id="{{module_id}}"
                        data-required-id="{{required_id}}"
                        data-relation-type="{{relation_type}}">
                    {{#str}} apply_fix, block_course_audit {{/str}}
                </button>
                {{/suggested_fix}}
            </div>
            {{/violations}}
            {{/modules}}
            {{^modules}}
            <div class="alert alert-light mb-0" role="alert">
                {{#str}} nomodules, block_course_audit {{/str}}
            </div>
            {{/modules}}
        </div>
    </div>
</div>
    
    