{"version":3,"file":"pagination.min.js","sources":["../src/pagination.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Potential contexts selector module.\n *\n * @module     block_course_audit/pagination\n * @copyright  2025 Bastian Schmidt-Kuhl <bastian.schmidt-kuhl@ruhr-uni-bochum.de>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine(['jquery'], function ($) {\n    const highlightSection = function (sectionNumber) {\n        const targetSection = $('#section-' + sectionNumber);\n        if (currentArrow) {\n            currentArrow?.remove();\n            currentArrow = null;\n        }\n        if (!targetSection.length) { return; }\n        // Scroll to section with navbar offset\n        $('html, body').animate({\n            scrollTop: targetSection.offset().top - 100\n        }, 800);\n\n        // Add temporary highlight\n        targetSection.addClass('block-course-converter-highlight');\n        // Add arrow indicator\n        currentArrow = $(\n            '<div class=\"block-course-converter-arrow\">' +\n            '<i class=\"fa fa-arrow-right fa-2x text-muted\" aria-hidden=\"true\"></i>' +\n            '</div>'\n        );\n        $('body').append(currentArrow);\n        // Position arrow next to section\n        const updatePosition = () => {\n            const rect = targetSection[0].getBoundingClientRect();\n            currentArrow.css({\n                left: rect.right + 10,\n                top: rect.top + window.scrollY + (rect.height / 2) - 25\n            });\n        };\n        updatePosition();\n        // Cleanup after 5 seconds\n        setTimeout(() => {\n            targetSection.removeClass('block-course-converter-highlight');\n            currentArrow?.remove();\n            currentArrow = null;\n        }, 2000);\n    };\n\n    return {\n        init: function () {\n            const container = $('#block-course-converter');\n            let currentPage = 1;\n            const totalPages = container.data('total-pages');\n\n            container.off('click.pagination').on('click.pagination', '.page-nav', function (e) {\n                e.preventDefault();\n                e.stopPropagation();\n\n                if ($(this).hasClass('disabled')) { return; }\n\n                const direction = $(this).data('direction');\n                const newPage = direction === 'next' ? Math.min(currentPage + 1, totalPages) : Math.max(currentPage - 1, 1);\n\n                if (newPage !== currentPage) {\n                    if (currentArrow) {\n                        currentArrow?.remove();\n                        currentArrow = null;\n                    }\n                    // Update page visibility\n                    $(`#page-content-${currentPage}`).removeClass('d-block').addClass('d-none');\n                    $(`#page-content-${newPage}`).removeClass('d-none').addClass('d-block');\n                    $('#current-page').text(newPage);\n                    // Update button states\n                    $('[data-direction=\"prev\"]').prop('disabled', newPage <= 1);\n                    $('[data-direction=\"next\"]').prop('disabled', newPage >= totalPages);\n                    // Trigger highlight\n                    const activePage = $(`#page-content-${newPage}`);\n                    const sectionNumber = activePage.data('section-number');\n                    if (sectionNumber || sectionNumber === 0) {\n                        highlightSection(sectionNumber);\n                        updateSectionHighlight(sectionNumber);\n                    }\n\n                    currentPage = newPage;\n                }\n            });\n\n\n            $('[data-toggle=\"tooltip\"]').tooltip({\n                container: 'body',\n                boundary: 'viewport'\n            });\n        }\n    };\n});"],"names":["define","$","init","container","currentPage","totalPages","data","off","on","e","preventDefault","stopPropagation","this","hasClass","newPage","Math","min","max","currentArrow","remove","removeClass","addClass","text","prop","sectionNumber","targetSection","length","animate","scrollTop","offset","top","append","rect","getBoundingClientRect","css","left","right","window","scrollY","height","updatePosition","setTimeout","highlightSection","updateSectionHighlight","tooltip","boundary"],"mappings":";;;;;;;AAsBAA,2CAAO,CAAC,WAAW,SAAUC,SAuClB,CACHC,KAAM,iBACIC,UAAYF,EAAE,+BAChBG,YAAc,QACZC,WAAaF,UAAUG,KAAK,eAElCH,UAAUI,IAAI,oBAAoBC,GAAG,mBAAoB,aAAa,SAAUC,MAC5EA,EAAEC,iBACFD,EAAEE,kBAEEV,EAAEW,MAAMC,SAAS,yBAGfC,QAAwB,SADZb,EAAEW,MAAMN,KAAK,aACQS,KAAKC,IAAIZ,YAAc,EAAGC,YAAcU,KAAKE,IAAIb,YAAc,EAAG,MAErGU,UAAYV,YAAa,uBACrBc,oCACAA,uDAAcC,SACdD,aAAe,KAGnBjB,0BAAmBG,cAAegB,YAAY,WAAWC,SAAS,UAClEpB,0BAAmBa,UAAWM,YAAY,UAAUC,SAAS,WAC7DpB,EAAE,iBAAiBqB,KAAKR,SAExBb,EAAE,2BAA2BsB,KAAK,WAAYT,SAAW,GACzDb,EAAE,2BAA2BsB,KAAK,WAAYT,SAAWT,kBAGnDmB,cADavB,0BAAmBa,UACLR,KAAK,mBAClCkB,eAAmC,IAAlBA,kBApEZ,SAAUA,qBACzBC,cAAgBxB,EAAE,YAAcuB,oCAClCN,qCACAA,qDAAcC,SACdD,aAAe,OAEdO,cAAcC,cAEnBzB,EAAE,cAAc0B,QAAQ,CACpBC,UAAWH,cAAcI,SAASC,IAAM,KACzC,KAGHL,cAAcJ,SAAS,oCAEvBH,aAAejB,EACX,yHAIJA,EAAE,QAAQ8B,OAAOb,cAEM,YACbc,KAAOP,cAAc,GAAGQ,wBAC9Bf,aAAagB,IAAI,CACbC,KAAMH,KAAKI,MAAQ,GACnBN,IAAKE,KAAKF,IAAMO,OAAOC,QAAWN,KAAKO,OAAS,EAAK,MAG7DC,GAEAC,YAAW,wBACPhB,cAAcL,YAAY,2DAC1BF,uDAAcC,SACdD,aAAe,OAChB,KAkCawB,CAAiBlB,eACjBmB,uBAAuBnB,gBAG3BpB,YAAcU,YAKtBb,EAAE,2BAA2B2C,QAAQ,CACjCzC,UAAW,OACX0C,SAAU"}